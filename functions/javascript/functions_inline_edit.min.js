function iLance_Inline_Edit(){}iLance_Inline_Edit.prototype.init_edit=function(){try{this._xh=new XMLHttpRequest()}catch(c){var b=new Array("MSXML2.XMLHTTP.5.0","MSXML2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP");var d=false;for(var a=0;a<b.length&&!d;a++){try{this._xh=new ActiveXObject(b[a]);d=true}catch(c){}}if(!d){return false}return true}};iLance_Inline_Edit.prototype.busy=function(){estadoActual=this._xh.readyState;return(estadoActual&&(estadoActual<4))};iLance_Inline_Edit.prototype.procesa=function(){if(this._xh.readyState==4&&this._xh.status==200){this.procesado=true}};iLance_Inline_Edit.prototype.send=function(a,b){if(!this._xh){this.init_edit()}if(!this.busy()){this._xh.open("POST",a,false);this._xh.setRequestHeader("Content-Type","application/x-www-form-urlencoded");this._xh.send(b+"&s="+fetch_session_id());if(this._xh.readyState==4&&this._xh.status==200){return this._xh.responseText}}return false};function _gr(b,a){remotos=new iLance_Inline_Edit;nt=remotos.send(b,"");fetch_js_object(a).innerHTML=nt}function base64(){}base64.chars=new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/");base64.cadena="";base64.cuenta=0;base64.setCadena=function(a){base64.cadena=a;base64.cuenta=0};base64.read=function(){if(!base64.cadena){return"END_OF_INPUT"}if(base64.cuenta>=base64.cadena.length){return"END_OF_INPUT"}var a=base64.cadena.charCodeAt(base64.cuenta)&255;base64.cuenta++;return a};base64.prototype.encode=function(e){base64.setCadena(e);var a="";var d=new Array(3);var c=0;var b=false;while(!b&&(d[0]=base64.read())!="END_OF_INPUT"){d[1]=base64.read();d[2]=base64.read();a+=(base64.chars[d[0]>>2]);if(d[1]!="END_OF_INPUT"){a+=(base64.chars[((d[0]<<4)&48)|(d[1]>>4)]);if(d[2]!="END_OF_INPUT"){a+=(base64.chars[((d[1]<<2)&60)|(d[2]>>6)]);a+=(base64.chars[d[2]&63])}else{a+=(base64.chars[((d[1]<<2)&60)]);a+=("=");b=true}}else{a+=(base64.chars[((d[0]<<4)&48)]);a+=("=");a+=("=");b=true}c+=4;if(c>=76){a+=("\n");c=0}}return a};b64=new base64;function do_inline_edit(b,a){elem=fetch_js_object("phrase"+b+"inline");elem.innerHTML='<input maxlength="140" type="text" value="'+html_entity_decode(a.innerHTML)+'" size="50" onkeypress="return detect_enter(this, event, \''+b+"')\" onblur=\"return detect_blur(this, '"+b+'\')" class="input" />';elem.firstChild.focus()}function detect_enter(b,a,c){a=(a)?a:window.event;if(a.keyCode==13&&b.value!=""){elem=fetch_js_object("phrase"+c+"inline");remotos=new iLance_Inline_Edit;nt=remotos.send(urlBase+c+"&text="+escape(b.value)+"&s="+ILSESSION+"&token="+ILTOKEN,"");elem.innerHTML="<span ondblclick=\"do_inline_edit('"+c+"', this);\">"+nt+"</span>";elem.firstChild.innerHTML=nt;return false}else{return true}}function detect_blur(a,b){if(a.value!=""){elem=fetch_js_object("phrase"+b+"inline");remotos=new iLance_Inline_Edit;nt=remotos.send(urlBase+b+"&text="+escape(a.value)+"&s="+ILSESSION+"&token="+ILTOKEN,"");elem.innerHTML="<span ondblclick=\"do_inline_edit('"+b+"', this);\">"+nt+"</span>";elem.firstChild.innerHTML=nt;return false}};